---
/**
 * Reusable Mobile Navigation Component
 */

interface NavItem {
  title: string;
  href: string;
}

const {
  items = [
  { title: "About", href: "/about" },
  { title: "Blog", href: "/blog" },
  { title: "Contact", href: "/contact" }
  ],
}: { items?: NavItem[] } = Astro.props;
---

{/* Mobile Navigation */}
  <div class="md:hidden">
    <button 
      id="nav-toggle" 
      class="p-2 rounded-lg bg-[var(--color-btn-bg-alt)] hover:bg-[var(--color-btn-bg)] text-[var(--color-primary)] transition"
      aria-label="Toggle navigation"
      aria-expanded="false"
    >
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>

    {/* Mobile Menu */}
    <div 
      id="nav-menu" 
      class="absolute top-full right-0 mt-2 w-48 bg-[var(--color-btn-bg-alt)] text-[var(--color-primary)] border border-[var(--color-accent)] rounded-lg shadow-lg opacity-0 invisible transition-all duration-300 origin-top-right"
    >
      <div class="flex flex-col p-4 gap-4">
        {items.map(item => (
          <a 
            href={item.href} 
            class="hover:text-[var(--color-btn-bg-alt)] transition duration-200"
          >
            {item.title}
          </a>
        ))}
      </div>
    </div>
  </div>
</nav>

<script>
  const toggle = document.getElementById('nav-toggle');
  const menu = document.getElementById('nav-menu');

  if (toggle && menu) {
    toggle.addEventListener('click', () => {
      const isOpen = menu.classList.contains('opacity-100');
      
      if (isOpen) {
        menu.classList.remove('opacity-100', 'visible');
        menu.classList.add('opacity-0', 'invisible');
        toggle.setAttribute('aria-expanded', 'false');
      } else {
        menu.classList.remove('opacity-0', 'invisible');
        menu.classList.add('opacity-100', 'visible');
        toggle.setAttribute('aria-expanded', 'true');
      }
    });

    // Close menu when a link is clicked
    const links = menu.querySelectorAll('a');
    links.forEach(link => {
      link.addEventListener('click', () => {
        menu.classList.remove('opacity-100', 'visible');
        menu.classList.add('opacity-0', 'invisible');
        toggle.setAttribute('aria-expanded', 'false');
      });
    });

    // Close menu when clicking outside
    document.addEventListener('click', (e) => {
      if (!toggle.contains(e.target) && !menu.contains(e.target)) {
        menu.classList.remove('opacity-100', 'visible');
        menu.classList.add('opacity-0', 'invisible');
        toggle.setAttribute('aria-expanded', 'false');
      }
    });
  }
</script>
